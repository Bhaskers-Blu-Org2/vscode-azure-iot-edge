{
  "name": "azure-iot-edge",
  "displayName": "Azure IoT Edge",
  "description": "Azure IoT Edge",
  "version": "0.0.1",
  "publisher": "vsciot-vscode",
  "engines": {
    "vscode": "^1.15.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [
    "onCommand:azure-iot-edge.editTemplate",
    "onCommand:azure-iot-edge.deployTemplate",
    "onCommand:azure-iot-edge.updateInterval",
    "onCommand:azure-iot-edge.generateDeploymentJsonForVerification",
    "onCommand:azure-iot-edge.generateRoutesJsonForVerification",
    "onCommand:azure-iot-edge.verifyModule",
    "onCommand:azure-iot-edge.viewModuleInput",
    "onCommand:azure-iot-edge.viewModuleOutput",
    "onCommand:azure-iot-edge.login",
    "onCommand:azure-iot-edge.deploy",
    "onCommand:azure-iot-edge.launch",
    "onCommand:azure-iot-edge.buildAndPushDockerImage"
  ],
  "main": "./out/src/extension",
  "contributes": {
    "menus": {
      "editor/context": [
        {
          "when": "editorLangId == dockerfile",
          "command": "azure-iot-edge.buildAndPushDockerImage"
        }
      ],
      "explorer/context": [
        {
          "when": "editorLangId == dockerfile",
          "command": "azure-iot-edge.buildAndPushDockerImage"
        },
        {
          "when": "resourceLangId == xml",
          "command": "azure-iot-edge.dotnetPublish"
        }
      ]
    },
    "commands": [
      {
        "command": "azure-iot-edge.editTemplate",
        "title": "Edit input template",
        "category": "Edge"
      },
      {
        "command": "azure-iot-edge.deployTemplate",
        "title": "Deploy input template",
        "category": "Edge"
      },
      {
        "command": "azure-iot-edge.updateInterval",
        "title": "Update interval",
        "category": "Edge"
      },
      {
        "command": "azure-iot-edge.generateDeploymentJsonForVerification",
        "title": "Generate deployment.json for module verification",
        "category": "Edge"
      },
      {
        "command": "azure-iot-edge.generateRoutesJsonForVerification",
        "title": "Generate routes.json for module verification",
        "category": "Edge"
      },
      {
        "command": "azure-iot-edge.verifyModule",
        "title": "Verify Module",
        "category": "Edge"
      },
      {
        "command": "azure-iot-edge.viewModuleInput",
        "title": "View Module Input",
        "category": "Edge"
      },
      {
        "command": "azure-iot-edge.viewModuleOutput",
        "title": "View Module Output",
        "category": "Edge"
      },
      {
        "command": "azure-iot-edge.login",
        "title": "Login",
        "category": "Edge"
      },
      {
        "command": "azure-iot-edge.deploy",
        "title": "Deploy",
        "category": "Edge"
      },
      {
        "command": "azure-iot-edge.launch",
        "title": "Launch",
        "category": "Edge"
      },
      {
        "command": "azure-iot-edge.buildAndPushDockerImage",
        "title": "Build and push the module as a Docker image",
        "category": "Edge"
      },
      {
        "command": "azure-iot-edge.dotnetPublish",
        "title": "Publish .NET project",
        "category": "Edge"
      }
    ],
    "configuration": {
      "type": "object",
      "title": "Azure IoT Edge configuration",
      "properties": {
        "azure-iot-edge.iotHubConnectionString": {
          "type": "string",
          "default": "",
          "description": "IoT Hub Connection String"
        }
      }
    },
    "debuggers": [
      {
        "type": "edge-coreclr",
        "label": "Edge Debug (.NET Core)",
        "variables": {
          "pickRemoteProcess": "csharp.listRemoteProcess2"
        },
        "initialConfigurations": [
          {
            "name": "Debug Edge Module (.NET Core)",
            "type": "coreclr",
            "request": "attach",
            "processId": "${command:pickRemoteProcess}",
            "pipeTransport": {
              "pipeProgram": "docker",
              "pipeArgs": [
                "exec",
                "-i",
                "<container_name>",
                "sh",
                "-c"
              ],
              "debuggerPath": "/root/vsdbg/vsdbg",
              "pipeCwd": "${workspaceRoot}",
              "quoteArgs": true
            },
            "sourceFileMap": {
              "/app": "${workspaceRoot}"
            },
            "justMyCode": true
          }
        ],
        "configurationSnippets": [
          {
            "label": "Edge: Debug Edge Module (.NET Core)",
            "description": "Debug .NET Core Edge Module",
            "body": {
              "name": "Debug Edge Module (.NET Core)",
              "type": "coreclr",
              "request": "attach",
              "processId": "^\"\\${command:pickRemoteProcess}\"",
              "pipeTransport": {
                "pipeProgram": "docker",
                "pipeArgs": [
                  "exec",
                  "-i",
                  "<container_name>",
                  "sh",
                  "-c"
                ],
                "debuggerPath": "/root/vsdbg/vsdbg",
                "pipeCwd": "^\"\\${workspaceRoot}\"",
                "quoteArgs": true
              },
              "sourceFileMap": {
                "/app": "^\"\\${workspaceRoot}\""
              },
              "justMyCode": true
            }
          }
        ]
      }
    ]
  },
  "scripts": {
    "vscode:prepublish": "tsc -p ./",
    "compile": "tsc -watch -p ./",
    "postinstall": "node ./node_modules/vscode/bin/install",
    "tslint": "tslint -t verbose src/**/*.ts",
    "test": "node ./node_modules/vscode/bin/test"
  },
  "devDependencies": {
    "@types/mocha": "^2.2.32",
    "@types/node": "^6.0.40",
    "mocha": "^2.3.3",
    "tslint": "^5.7.0",
    "typescript": "^2.0.3",
    "vscode": "^1.0.0"
  },
  "dependencies": {
    "azure-iothub": "^1.1.15",
    "fs-extra": "^4.0.1",
    "vscode-extension-telemetry": "0.0.8"
  }
}
